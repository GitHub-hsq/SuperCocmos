# ğŸ”§ ä¿®å¤404é”™è¯¯æŒ‡å—

## é—®é¢˜æè¿°
è·å–æ¨¡å‹åˆ—è¡¨ (`/api/models`) å’Œæ·»åŠ æ¨¡å‹ (`/api/models/add`) è¿”å›404é”™è¯¯

## âœ… å·²ä¿®å¤çš„é…ç½®

### 1. æ¢å¤ä»£ç†é…ç½® (vite.config.ts)
```typescript
proxy: {
  '/api': {
    target: 'http://127.0.0.1:3002',
    changeOrigin: true,
    rewrite: path => path.replace('/api/', '/'),  // âœ… å·²æ¢å¤
  },
}
```

**è¯´æ˜ï¼š** ä¸å…¶ä»–ç°æœ‰APIä¿æŒä¸€è‡´çš„é…ç½®
- `/api/models` â†’ é‡å†™ä¸º â†’ `/models`
- `/api/models/add` â†’ é‡å†™ä¸º â†’ `/models/add`

### 2. ä¸´æ—¶ç§»é™¤è®¤è¯ (service/src/index.ts)
```typescript
// ç¬¬459è¡Œï¼šæ·»åŠ æ¨¡å‹ï¼ˆå·²ä¸´æ—¶ç§»é™¤è®¤è¯ï¼‰
router.post('/models/add', async (req, res) => {

// ç¬¬513è¡Œï¼šæ›´æ–°æ¨¡å‹ï¼ˆå·²ä¸´æ—¶ç§»é™¤è®¤è¯ï¼‰
router.post('/models/update', async (req, res) => {

// ç¬¬561è¡Œï¼šåˆ é™¤æ¨¡å‹ï¼ˆå·²ä¸´æ—¶ç§»é™¤è®¤è¯ï¼‰
router.post('/models/delete', async (req, res) => {
```

**è¯´æ˜ï¼š** ä¾¿äºæµ‹è¯•ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®æ¢å¤ `[auth]` ä¸­é—´ä»¶

## ğŸš€ ç«‹å³æ‰§è¡Œæ­¥éª¤

### æ­¥éª¤1: é‡å¯å‰ç«¯æœåŠ¡ âš ï¸ **å¿…é¡»æ‰§è¡Œï¼**

```bash
# åœæ­¢å½“å‰çš„å‰ç«¯å¼€å‘æœåŠ¡å™¨ (Ctrl+C)
# ç„¶åé‡æ–°å¯åŠ¨
pnpm dev
```

> **é‡è¦ï¼š** ä¿®æ”¹ `vite.config.ts` åå¿…é¡»é‡å¯å‰ç«¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆï¼

### æ­¥éª¤2: ç¡®è®¤åç«¯æœåŠ¡è¿è¡Œ

æ‰“å¼€æ–°çš„ç»ˆç«¯çª—å£ï¼š

```bash
cd service
pnpm start
# æˆ–è€…
npm start
```

ä½ åº”è¯¥çœ‹åˆ°ï¼š
```
Server is running on port 3002
```

### æ­¥éª¤3: è¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯

åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š

```bash
node test-backend-direct.js
```

**é¢„æœŸè¾“å‡ºï¼š**
```
ğŸ§ª æµ‹è¯•åç«¯APIï¼ˆç›´æ¥è®¿é—®ï¼Œä¸é€šè¿‡Viteä»£ç†ï¼‰

1ï¸âƒ£ æµ‹è¯•: GET /api/models
   çŠ¶æ€ç : 200
   âœ… æˆåŠŸ

2ï¸âƒ£ æµ‹è¯•: GET /models
   çŠ¶æ€ç : 200
   âœ… æˆåŠŸ
   
... (å…¶ä»–æµ‹è¯•)
```

### æ­¥éª¤4: åœ¨æµè§ˆå™¨ä¸­æµ‹è¯•

1. æ‰“å¼€æµè§ˆå™¨ï¼š`http://192.168.1.29:1002`
2. æ‰“å¼€å¼€å‘è€…å·¥å…· (F12) â†’ Network æ ‡ç­¾
3. è¿›å…¥ è®¾ç½® â†’ æ¨¡å‹é…ç½®
4. ç‚¹å‡»"åˆ·æ–°"æŒ‰é’®
5. æŸ¥çœ‹ Network æ ‡ç­¾ä¸­çš„è¯·æ±‚ï¼š
   - **è¯·æ±‚URL:** `http://192.168.1.29:1002/api/models`
   - **çŠ¶æ€ç :** åº”è¯¥æ˜¯ `200`
   - **å“åº”:** åº”è¯¥åŒ…å«æ¨¡å‹åˆ—è¡¨

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜A: ä»ç„¶404

**æ£€æŸ¥æ¸…å•ï¼š**
1. âœ… å‰ç«¯æœåŠ¡å·²é‡å¯ï¼Ÿ
2. âœ… åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œï¼Ÿ
3. âœ… ç«¯å£3002æ²¡æœ‰è¢«å…¶ä»–ç¨‹åºå ç”¨ï¼Ÿ

**éªŒè¯æ–¹æ³•ï¼š**
```bash
# Windowsæ£€æŸ¥ç«¯å£
netstat -ano | findstr :3002
netstat -ano | findstr :1002

# ç›´æ¥è®¿é—®åç«¯ï¼ˆä½¿ç”¨æµè§ˆå™¨ï¼‰
# æ‰“å¼€: http://127.0.0.1:3002/models
# åº”è¯¥çœ‹åˆ°JSONå“åº”
```

### é—®é¢˜B: åç«¯ä¸å¯è®¿é—®

**å¯èƒ½åŸå› ï¼š**
- åç«¯æœåŠ¡æœªå¯åŠ¨
- ç«¯å£è¢«å ç”¨
- é˜²ç«å¢™é˜»æ­¢

**è§£å†³æ–¹æ³•ï¼š**
```bash
# 1. é‡æ–°ç¼–è¯‘åç«¯
cd service
pnpm build

# 2. é‡å¯åç«¯
pnpm start
```

### é—®é¢˜C: CORSé”™è¯¯

**ç—‡çŠ¶ï¼š** æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤ºè·¨åŸŸé”™è¯¯

**è§£å†³ï¼š** åç«¯å·²é…ç½®CORSï¼Œæ£€æŸ¥ï¼š
```typescript
// service/src/index.ts ç¬¬27è¡Œ
app.all('*', (_, res, next) => {
  res.header('Access-Control-Allow-Origin', '*')
  res.header('Access-Control-Allow-Headers', 'authorization, Content-Type')
  res.header('Access-Control-Allow-Methods', '*')
  next()
})
```

### é—®é¢˜D: ç½‘ç»œä»£ç†é…ç½®

**æ£€æŸ¥ç¯å¢ƒå˜é‡ï¼š**

åˆ›å»ºæˆ–æ£€æŸ¥ `.env` æ–‡ä»¶ï¼š
```env
# å‰ç«¯ç¯å¢ƒå˜é‡
VITE_APP_API_BASE_URL=http://127.0.0.1:3002
```

## ğŸ“Š å®Œæ•´çš„è¯·æ±‚æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æµè§ˆå™¨å‘é€è¯·æ±‚                                                â”‚
â”‚ http://192.168.1.29:1002/api/models                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Viteå¼€å‘æœåŠ¡å™¨ (ç«¯å£ 1002)                                    â”‚
â”‚ ä»£ç†é…ç½®: /api â†’ http://127.0.0.1:3002                       â”‚
â”‚ rewrite: /api/models â†’ /models                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‘é€åˆ°åç«¯                                                    â”‚
â”‚ http://127.0.0.1:3002/models                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Expressåç«¯ (ç«¯å£ 3002)                                       â”‚
â”‚ app.use('', router)                                         â”‚
â”‚ router.get('/models', ...)                                  â”‚
â”‚ âœ… åŒ¹é…æˆåŠŸ                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿”å›å“åº”                                                      â”‚
â”‚ { status: 'Success', data: [...] }                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âš¡ å¿«é€ŸéªŒè¯å‘½ä»¤

```bash
# 1. æµ‹è¯•åç«¯ç›´æ¥è®¿é—®ï¼ˆåº”è¯¥è¿”å›JSONï¼‰
curl http://127.0.0.1:3002/models

# 2. æµ‹è¯•åç«¯APIè·¯å¾„ï¼ˆåº”è¯¥è¿”å›JSONï¼‰
curl http://127.0.0.1:3002/api/models

# 3. æµ‹è¯•æ·»åŠ æ¨¡å‹ï¼ˆåº”è¯¥è¿”å›æˆåŠŸï¼‰
curl -X POST http://127.0.0.1:3002/models/add \
  -H "Content-Type: application/json" \
  -d '{
    "id": "test-model",
    "provider": "Test",
    "displayName": "Test Model",
    "enabled": true
  }'
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **å¿…é¡»é‡å¯å‰ç«¯æœåŠ¡** - ä¿®æ”¹ `vite.config.ts` åå¿…é¡»é‡å¯
2. **åç«¯æœåŠ¡å¿…é¡»è¿è¡Œ** - ç¡®ä¿åœ¨ç«¯å£3002ä¸Šç›‘å¬
3. **æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°** - æŸ¥çœ‹å®é™…çš„è¯·æ±‚URLå’Œé”™è¯¯ä¿¡æ¯
4. **ä½¿ç”¨æµ‹è¯•è„šæœ¬** - è¿è¡Œ `node test-backend-direct.js` éªŒè¯åç«¯

## âœ… æˆåŠŸæ ‡å¿—

å½“ä¸€åˆ‡æ­£å¸¸æ—¶ï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š

**æµè§ˆå™¨ Network æ ‡ç­¾ï¼š**
```
Status: 200 OK
Response: {
  "status": "Success",
  "message": "è·å–æ¨¡å‹åˆ—è¡¨æˆåŠŸ",
  "data": [
    {
      "id": "gpt-4o",
      "provider": "OpenAI",
      "displayName": "GPT-4o",
      "enabled": true,
      ...
    },
    ...
  ]
}
```

**å‰ç«¯ç•Œé¢ï¼š**
- æ¨¡å‹é…ç½®é¡µé¢æ˜¾ç¤ºé»˜è®¤çš„ä¸¤ä¸ªæ¨¡å‹
- å¯ä»¥ç‚¹å‡»"æ–°å¢æ¨¡å‹"æŒ‰é’®
- å¯ä»¥ç¼–è¾‘å’Œåˆ é™¤æ¨¡å‹
- å¯ç”¨/ç¦ç”¨å¼€å…³æ­£å¸¸å·¥ä½œ

